{% extends 'base.html' %}

{% block title %}Users - TaskMaster App{% endblock %}

{% block content %}
<div class="page-title">
    <h1>Users</h1>
    <a href="{{ url_for('main.create_user') }}" class="btn btn-primary">Create User</a>
</div>

{% if users %}
    <div class="users-container">
        {% for user in users %}
            <div class="user-card">
                <div class="user-avatar color-{{ user.avatar_color }}">{{ user.name[0] }}</div>
                <div class="user-info">
                    <h3>{{ user.name }}</h3>
                    {% if user.email %}
                    <p class="user-email">{{ user.email }}</p>
                    {% endif %}

                    <div class="user-stats">
                        <div class="stat-item">
                            <div class="stat-label">Assigned Tasks</div>
                            <div class="stat-value">{{ user.todos.count() }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Created Tasks</div>
                            <div class="stat-value">{{ user.created_todos.count() }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Events</div>
                            <div class="stat-value">{{ user.events.count() }}</div>
                        </div>
                    </div>
                </div>

                <div class="user-actions">
                    <a href="{{ url_for('main.edit_user', id=user.id) }}" class="btn btn-icon btn-primary">
                        <i>✏️</i>
                    </a>
                    <a href="{{ url_for('main.delete_user', id=user.id) }}" class="btn btn-icon btn-danger"
                       onclick="return confirm('Are you sure you want to delete this user? This action cannot be undone if they have tasks or events.')">
                        <i>🗑️</i>
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <p>No users have been created yet.</p>
        <a href="{{ url_for('main.create_user') }}" class="btn btn-primary">Create your first user</a>
    </div>
{% endif %}
{% endblock %}