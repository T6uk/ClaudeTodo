<!-- app/templates/dashboard/widgets/_notes_widget.html -->
<div class="widget-notes">
    {% set notes = current_user.notes.order_by(Note.updated_at.desc()).limit(3).all() %}

    {% if notes %}
        <div class="widget-notes-grid">
            {% for note in notes %}
                <div class="widget-note" style="background-color: {{ note.color }};">
                    <div class="widget-note-content">
                        {{ note.content|truncate(100) }}
                    </div>
                    <div class="widget-note-footer">
                        {{ note.updated_at.strftime('%Y-%m-%d') }}
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-3">
            <a href="{{ url_for('notes.notes') }}" class="btn btn-sm btn-primary">
                <i class="fas fa-sticky-note me-1"></i> View All Notes
            </a>
        </div>
    {% else %}
        <div class="text-center py-4">
            <i class="fas fa-sticky-note fa-3x mb-3 text-muted"></i>
            <p>No notes created yet</p>
            <a href="{{ url_for('notes.notes') }}" class="btn btn-sm btn-primary">
                <i class="fas fa-plus me-1"></i> Create Notes
            </a>
        </div>
    {% endif %}
</div>

<style>
    .widget-notes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 10px;
        margin-top: 10px;
    }

    .widget-note {
        min-height: 100px;
        padding: 12px;
        border-radius: 5px;
        position: relative;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .widget-note:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .widget-note-content {
        font-family: 'McLaren', sans-serif;
        font-size: 0.8rem;
        line-height: 1.3;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
    }

    .widget-note-footer {
        position: absolute;
        bottom: 3px;
        right: 5px;
        font-size: 0.6rem;
        opacity: 0.7;
    }
</style>